# Shop

Before a battle, the player can visit the shop. The robot is automatically healed
to full health and energy while in the shop.

## Main Shop Menu
```
=== SHOP ===
Level: 0 | Money: $100 | Inventory: 1/6

1. Buy
2. Sell
3. Inventory
4. Back
```

## Buy
Shows all items in the game. Items above the player's level are shown but marked
with their level requirement. Enter a number to buy, or `B` to go back.
Type `s<number>` or `show <number>` to see item details before buying.

```
=== BUY ===
Level: 0 | Money: $100 | Inventory: 1/6

B. Back
1. Stick - $10
2. Cardboard Armor - $10
3. Small Battery - $50 (Requires level 1)
```

### Buying Rules (checked in order)
1. Money — must have enough
2. Inventory Space — must have room
3. Level — item level must be <= player level
4. Requirements — must own required items
5. Gear Stacking — cannot own duplicate gear

Each purchased weapon is a unique instance (can buy multiples). Gear cannot be
duplicated.

## Sell
Shows inventory items with sell prices (half of buy price). Enter a number to sell,
or `B` to go back.

```
=== SELL ===
Level: 0 | Money: $100 | Inventory: 1/6

B. Back
1. Stick - $5
2. Cardboard Armor - $5
```

Selling removes the item from inventory and adds half its buy price to money.

# Interfaces

## CLI
- Menu-driven numbered interface as shown above
- Show status bar (level, money, inventory) on every shop screen
- Print error messages inline for failed purchases (e.g., "Not enough money")
- `B` or `b` returns to the previous menu

## Web
- Tabbed interface: Buy | Sell | Inventory
- Drag-and-drop to sell items
- Grayed-out items the player can't afford or isn't high enough level for
- Toast notifications for purchases and errors

## Mobile
- Swipeable tabs for Buy / Sell / Inventory
- Items displayed in a scrollable list with buy/sell buttons
- Confirmation dialog before purchases
- Pull-to-refresh inventory

## API
- `POST /game/:gameId/shop/buy` with body `{ "itemId": string }`
- `POST /game/:gameId/shop/sell` with body `{ "inventoryIndex": number }`
- `GET /game/:gameId/shop/catalog` returns available items with affordability flags
